<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.graby.store.dao.mybatis.ReportDao">

	<!-- 查询已关联的淘宝商品 2013-07-06 23:59-->
	<select id="sumUserSellouts" resultType="map">
	<![CDATA[
		select a.`create_userid` as userId, b.item_id as itemId, c.title as itemName, sum(b.num) as num from
		sc_ship_order a
			left join sc_ship_order_detail b on b.order_id = a.id
			left join sc_item c on b.item_id = c.id
		where
			a.type='send' and a.status='WAIT_BUYER_RECEIVED'

		and a.`create_userid`= #{0}
		and a.`create_date` > date_format(#{1},'%Y-%m-%d %H:%i')
		and a.`create_date` <= date_format(#{2},'%Y-%m-%d %H:%i')
		group by b.item_id
	]]>
	</select>


</mapper> 
